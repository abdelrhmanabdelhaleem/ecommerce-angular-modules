<div class="container mt-4">
  <h2 class="mb-3">{{ "ORDERS.TITLE" | translate }}</h2>

  <div *ngIf="!loading.isLoading && !ordersItems" class="alert alert-info">
    {{ "ORDERS.NO_ORDERS" | translate }}
  </div>

  <div
    *ngFor="let order of ordersItems; let i = index"
    class="card mb-4 shadow-sm"
  >
    <div class="card-header d-flex justify-content-between align-items-center">
      <span>
        <strong>{{ "ORDERS.ORDER_NUMBER" | translate }} #{{ i + 1 }}</strong> -
        {{ order._id }}
      </span>
      <span class="badge bg-primary">
        {{ order.paymentMethodType | uppercase }}
      </span>
    </div>

    <div class="card-body">
      <p>
        <strong>{{ "ORDERS.CUSTOMER" | translate }}:</strong>
        {{ order.user.name }} ({{ order.user.email }})
      </p>
      <p>
        <strong>{{ "ORDERS.SHIPPING" | translate }}:</strong>
        {{ order.shippingAddress.city }}, {{ order.shippingAddress.details }}
      </p>
      <p>
        <strong>{{ "ORDERS.STATUS" | translate }}:</strong>
        <span
          class="badge mx-1"
          [ngClass]="order.isPaid ? 'bg-success' : 'bg-warning'"
        >
          {{
            order.isPaid
              ? ("ORDERS.PAID" | translate)
              : ("ORDERS.PENDING" | translate)
          }}
        </span>
        <span
          class="badge ms-2"
          [ngClass]="order.isDelivered ? 'bg-success' : 'bg-secondary'"
        >
          {{
            order.isDelivered
              ? ("ORDERS.DELIVERED" | translate)
              : ("ORDERS.NOT_DELIVERED" | translate)
          }}
        </span>
      </p>
      <p>
        <strong>{{ "ORDERS.TOTAL_PRICE" | translate }}:</strong>
        {{ order.totalOrderPrice | currency }}
      </p>
      <p>
        <strong>{{ "ORDERS.CREATED_AT" | translate }}:</strong>
        {{ order.createdAt | date : "medium" }}
      </p>

      <h5 class="mt-3">{{ "ORDERS.PRODUCTS" | translate }}</h5>
      <table class="table table-sm table-bordered align-middle text-center">
        <thead class="table-light">
          <tr>
            <th>{{ "ORDERS.IMAGE" | translate }}</th>
            <th>{{ "ORDERS.TITLE_PRODUCT" | translate }}</th>
            <th>{{ "ORDERS.BRAND" | translate }}</th>
            <th>{{ "ORDERS.CATEGORY" | translate }}</th>
            <th>{{ "ORDERS.QUANTITY" | translate }}</th>
            <th>{{ "ORDERS.PRICE" | translate }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of order.cartItems">
            <td>
              <img
                [src]="item.product.imageCover"
                alt="{{ item.product.title }}"
                width="60"
                class="rounded"
              />
            </td>
            <td>{{ item.product.title }}</td>
            <td>{{ item.product.brand.name }}</td>
            <td>{{ item.product.category.name }}</td>
            <td>{{ item.count }}</td>
            <td>{{ item.price | currency }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
